# Model Switcher Tray App

Небольшое Python-приложение с системной иконкой для переключения между моделями. Есть простое окно на Tkinter, где можно добавлять/удалять модели и выбирать активную; список моделей дублируется в меню иконки в трее.

## Запуск
1. Создайте окружение и поставьте зависимости:
   ```bash
   python3 -m venv .venv
   source .venv/bin/activate
   pip install -r requirements.txt
   ```
2. Стартуйте приложение:
   ```bash
   python main.py
   ```

## Как это работает
- Данные лежат в `data/models.json`. При первом запуске файл создается автоматически с демо-моделями (Z.AI proxy и локальный Ollama).
- Иконка в трее показывает список моделей; активная отмечена чекбоксом. Клик по пункту — сделать модель активной (и записать настройки в `~/.claude/settings.json`).
- Кнопка "Открыть окно" в меню иконки поднимает UI, "Выйти" завершает приложение.
- Главное окно разделено на две части: слева вертикальная панель действий, справа список моделей.
- В окне можно добавить/редактировать модель в отдельном диалоге (название + endpoint обязательны). Клонирование, активация и удаление доступны как кнопками слева, так и через контекстное меню таблицы.
- В диалоге есть кнопка "Проверить и загрузить модели": приложение делает `GET <endpoint>/v1/models` (с `x-api-key` и `anthropic-version`) и подставляет доступные `id` в выпадающие списки Haiku/Sonnet/Opus.
- Установка активной модели сразу синхронизирует `~/.claude/settings.json`.
- Кнопка "Экспорт в Claude Code" вручную экспортирует выбранную модель в `~/.claude/settings.json` в формате:
  ```json
  {
    "env": {
      "ANTHROPIC_AUTH_TOKEN": "<api_key>",
      "ANTHROPIC_BASE_URL": "<endpoint>",
      "CLAUDE_CODE_ENABLE_TELEMETRY": "0",
      "CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC": "1",
      "HTTP_PROXY": "",
      "ANTHROPIC_DEFAULT_HAIKU_MODEL": "glm-4.5-air",
      "ANTHROPIC_DEFAULT_SONNET_MODEL": "glm-4.7",
      "ANTHROPIC_DEFAULT_OPUS_MODEL": "glm-4.7"
    }
  }
  ```
  После экспорта перезапусти `claude` в новой консоли.

## Что можно допилить дальше
- Добавить поля для типа модели/температуры/лимита токенов.
- Хранить API-ключи шифрованно или в системном хранилище.
- Подключить реальные вызовы к API выбранной модели.
- Сделать сборку в app bundle (`pyinstaller`/`briefcase`) и собственную иконку.
